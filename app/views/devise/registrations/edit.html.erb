<%= render "shared/second-header" %>
<div class="topver"></div>

<div class="main">
  <div class="main-contents login">
   <div class="form__wrapper">
   
      <div class="form__top">
       登録情報　変更
      </div>

      <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
         <%= render 'shared/error_messages', model: f.object %> 

         <div class="field">
            <%= f.label :email, "メールアドレス" %><br />
            <%= f.email_field :email, autofocus: true, autocomplete: "email" %>
         </div>

         <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
            <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
         <% end %>

         <div class="field">
             <%= f.label :image, "プロフィール画像" %><br/>
            <% if current_user.image.present? %>
               <img src="<%= current_user.image %>" id ='prev-img'>
            <% else %>
                <%= image_tag "default.png", id: "default-image" %>
            <% end %>
             <div id="prev-image"></div>
             <%= f.file_field :image, id: "user-image" %>

         </div>

         <div class="field">
              <%= f.label :username, "ユーザー名（20文字以内）" %>
              <%= f.text_field :username %>
         </div>

         <div class="field">
              <%= f.label :profile, "プロフィール"%><br />
              <%= f.text_area :profile, class: :form__text, id:"user_profile"%>
         </div>

         <div class="login__attention">
              <p class='info-text'>※パスワード以外の変更の場合は現在のパスワードをご入力ください</p>
              <p class='info-text'>※パスワードを変更する場合は新しいパスワードをご入力ください</p>
         </div>

         <div class="field">
              <div class="field__flex">
                    <%= f.label :password, "パスワード（英数字6文字以上）" %>
                    <div class="need">必須</div><br />
               </div>
               <%= f.password_field :password, autocomplete: "new-password" %>
         </div>

         <div class="field">
              <div class="field__flex">
                    <%= f.label :password_confirmation, "パスワード再入力" %>
                    <div class="need">必須</div><br />
              </div>
              <%= f.password_field :password_confirmation, autocomplete: "new-password" %>
         </div>

        <div class="field">
              <%= f.submit "変更する", class: :form__btn %>
        </div>

      <% end %>

      <div class="account__destroy">
          <div class="login__attention">
          <span>！</span>アカウントを削除する場合はこちらから
          </div>
          <%= button_to "退会する", registration_path(resource_name), data: { confirm: "データが消えてしまいますが、本当によろしいですか？" }, method: :delete, class: :delete__btn %>
      </div>

   </div>
  </div>
</div>

<%= link_to "Back", :back %>